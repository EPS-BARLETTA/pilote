<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PILOTE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="hero">
    <div class="hero-content">
      <p class="eyebrow">Pilote â€“ rÃ©gulation Ã©motionnelle</p>
      <h1>Mon carnet de bord serein</h1>
      <p class="lead">
        Un cockpit simple pour aider lâ€™enfant Ã  se repÃ©rer, se mettre en pause et
        avancer avec ses parents, sans pression ni jugement.
      </p>
    </div>
  </header>

  <nav class="main-nav" aria-label="Navigation espaces">
    <button class="nav-link active" data-target="child-space">Espace enfant</button>
    <button class="nav-link" data-target="parent-space">Espace parent</button>
    <button class="nav-link" data-target="bilan-space">Espace bilan</button>
  </nav>

  <main>
    <section id="child-space" class="panel active">
      <header class="panel-header">
        <div>
          <p class="eyebrow">Espace enfant</p>
          <h2>Mon cockpit</h2>
        </div>
        <div>
          <p class="small-label">Semaine en cours</p>
          <p id="currentWeekLabel" class="week-label"></p>
        </div>
      </header>

      <article class="card child-halo span-2">
        <div class="halo-content">
          <div>
            <p class="eyebrow">Bienvenue Ã  bord</p>
            <h3>Respire, tu es en zone protÃ©gÃ©e</h3>
            <p class="card-lead">
              On observe ce qui se passe Ã  lâ€™intÃ©rieur, on appuie sur pause si besoin et on
              choisit une idÃ©e qui fait du bien.
            </p>
            <div class="child-mantras">
              <span>ğŸŒ¤ï¸ Je peux dire comment je me sens</span>
              <span>ğŸ§˜ Je fais une pause sans Ãªtre jugÃ©</span>
              <span>ğŸ¤ On cherche ensemble</span>
            </div>
          </div>
          <div class="halo-visual">
            <div class="halo-bubble bubble-1"></div>
            <div class="halo-bubble bubble-2"></div>
            <div class="halo-bubble bubble-3"></div>
            <div class="halo-plane" aria-hidden="true"></div>
          </div>
        </div>
      </article>

      <div class="grid">
        <article class="card span-2">
          <h3>BaromÃ¨tre des Ã©motions</h3>
          <p class="card-lead">
            Choisis ton niveau et demande de lâ€™aide avant que ce soit trop.
          </p>
          <div class="barometer" role="group" aria-label="BaromÃ¨tre des Ã©motions">
            <button class="barometer-step" data-level="1">
              <span class="level-icon" aria-hidden="true">ğŸŒˆ</span>
              <span class="level-number">1</span>
              <span class="level-label">Calme</span>
            </button>
            <button class="barometer-step" data-level="2">
              <span class="level-icon" aria-hidden="true">ğŸ™‚</span>
              <span class="level-number">2</span>
              <span class="level-label">Bien</span>
            </button>
            <button class="barometer-step" data-level="3">
              <span class="level-icon" aria-hidden="true">âš¡ï¸</span>
              <span class="level-number">3</span>
              <span class="level-label">ChargÃ©</span>
            </button>
            <button class="barometer-step" data-level="4">
              <span class="level-icon" aria-hidden="true">ğŸŒªï¸</span>
              <span class="level-number">4</span>
              <span class="level-label">TrÃ¨s chargÃ©</span>
            </button>
            <button class="barometer-step" data-level="5">
              <span class="level-icon" aria-hidden="true">ğŸš¨</span>
              <span class="level-number">5</span>
              <span class="level-label">Trop plein</span>
            </button>
          </div>
          <div class="barometer-status">
            <p class="status-label">Niveau sÃ©lectionnÃ© :</p>
            <p id="currentLevelLabel" class="status-value">Pas encore choisi</p>
          </div>
          <button id="pauseButton" class="pause-btn" type="button" hidden>Je demande une pause</button>
          <p class="micro-copy">La pause est une compÃ©tence : bravo dâ€™y penser avant de dÃ©border.</p>
        </article>

        <article class="card">
          <h3>BoÃ®te Ã  idÃ©es pour redescendre</h3>
          <ul id="strategyList" class="pill-list"></ul>
        </article>

        <article class="card breathing-card">
          <h3>Respiration douce</h3>
          <p class="card-lead">Inspire quand le cercle grandit, expire quand il rÃ©trÃ©cit.</p>
          <div class="breath-circle" aria-hidden="true"></div>
          <ul class="breath-steps">
            <li>Inspire 4 secondes</li>
            <li>Pause 2 secondes</li>
            <li>Expire 4 secondes</li>
          </ul>
        </article>

        <article class="card">
          <div class="card-header">
            <h3>Mes objectifs du moment</h3>
            <button id="resetObjectivesBtn" class="ghost-btn" type="button">RÃ©initialiser la journÃ©e</button>
          </div>
          <ul id="objectiveList" class="objective-list"></ul>
          <p id="focusSummary" class="micro-copy"></p>
        </article>

        <article class="card">
          <h3>Jetons et badges</h3>
          <div class="token-display">
            <p>Jetons gagnÃ©s</p>
            <p id="tokenCount" class="token-count">0</p>
          </div>
          <ul id="badgeList" class="badge-list"></ul>
        </article>

        <article class="card calm-anchor">
          <h3>Petites ancres</h3>
          <ul class="anchor-list">
            <li>ğŸ‘ Frotte doucement tes mains</li>
            <li>ğŸ‘£ Pose tes pieds bien Ã  plat</li>
            <li>ğŸ‘‚ Ã‰coute trois sons autour de toi</li>
            <li>ğŸ‘ƒ Choisis une odeur rassurante</li>
          </ul>
        </article>

        <article class="card">
          <h3>RÃ©compenses relationnelles</h3>
          <div class="reward-columns" id="rewardList"></div>
        </article>
      </div>
    </section>

    <section id="parent-space" class="panel" data-lock="parent">
      <header class="panel-header">
        <div>
          <p class="eyebrow">Espace parent</p>
          <h2>Tour de contrÃ´le</h2>
        </div>
        <div>
          <button class="ghost-btn" data-action="lock-parent">Verrouiller</button>
        </div>
      </header>

      <div class="lock-banner" id="parentLockBanner">
        <p>AccÃ¨s protÃ©gÃ© : saisissez le code PIN pour dÃ©verrouiller.</p>
        <form id="parentUnlockForm" class="pin-form">
          <label for="parentPinInput">Code PIN</label>
          <input id="parentPinInput" type="password" inputmode="numeric" maxlength="6" required />
          <button type="submit">DÃ©verrouiller</button>
          <p class="micro-copy">Code par dÃ©faut : 1234 (modifiable plus bas).</p>
        </form>
      </div>

      <div class="grid lockable" id="parentContent">
        <article class="card span-2">
          <div class="card-header">
            <h3>Objectif prioritaire de la semaine</h3>
            <button class="ghost-btn" data-action="clear-focus">Effacer</button>
          </div>
          <form id="focusForm" class="stack-form">
            <label for="focusInput">CompÃ©tence travaillÃ©e</label>
            <input id="focusInput" type="text" placeholder="Ex : Demander une pause avant de dÃ©border" />
            <label for="focusNotes">RepÃ¨res pour lâ€™enfant</label>
            <textarea id="focusNotes" rows="3" placeholder="Une phrase simple Ã  afficher dans lâ€™espace enfant."></textarea>
            <button type="submit">Enregistrer</button>
          </form>
        </article>

        <article class="card">
          <h3>Routines</h3>
          <form id="routineForm" class="stack-form">
            <label>Routine du matin</label>
            <textarea data-routine="morning" rows="3" placeholder="3 Ã©tapes maximum."></textarea>
            <label>Routine des devoirs</label>
            <textarea data-routine="homework" rows="3" placeholder="Guidage simple pour limiter la surcharge."></textarea>
            <label>Routine du soir</label>
            <textarea data-routine="evening" rows="3" placeholder="Rassurer et anticiper la nuit."></textarea>
            <button type="submit">Sauvegarder les routines</button>
          </form>
        </article>

        <article class="card">
          <h3>DÃ©clencheurs frÃ©quents</h3>
          <form id="triggerForm" class="stack-form">
            <textarea id="triggerInput" rows="5" placeholder="Bruit, transitions, fatigue..."></textarea>
            <button type="submit">Mettre Ã  jour</button>
          </form>
        </article>

        <article class="card">
          <h3>StratÃ©gies proposÃ©es</h3>
          <form id="strategyForm" class="stack-form">
            <p class="micro-copy">Entre 3 et 5 idÃ©es stables. Elles apparaissent telles quelles pour lâ€™enfant.</p>
            <div class="field-group" id="strategyFields"></div>
            <button type="submit">Enregistrer</button>
          </form>
        </article>

        <article class="card">
          <h3>Micro-objectifs</h3>
          <form id="objectiveForm" class="stack-form">
            <p class="micro-copy">1 Ã  3 objectifs, identiques toute la semaine.</p>
            <div class="field-group" id="objectiveFields"></div>
            <button type="submit">Enregistrer</button>
          </form>
        </article>

        <article class="card">
          <h3>RÃ©compenses</h3>
          <form id="rewardForm" class="stack-form">
            <label>RÃ©compenses immÃ©diates</label>
            <textarea data-reward="immediate" rows="3" placeholder="Moment cÃ¢lin, puzzle..."></textarea>
            <label>RÃ©compenses programmÃ©es</label>
            <textarea data-reward="planned" rows="3" placeholder="Balade, vÃ©lo, cinÃ©ma..."></textarea>
            <label>RÃ©compenses symboliques</label>
            <textarea data-reward="symbolic" rows="3" placeholder="Badges, messages..."></textarea>
            <button type="submit">Publier pour lâ€™enfant</button>
          </form>
        </article>

        <article class="card span-2">
          <h3>Scripts parentaux</h3>
          <div class="scripts" id="scriptList"></div>
        </article>

        <article class="card">
          <h3>Code PIN</h3>
          <form id="pinForm" class="stack-form">
            <label for="pinInput">Nouveau code (4 Ã  6 chiffres)</label>
            <input id="pinInput" type="password" inputmode="numeric" minlength="4" maxlength="6" placeholder="â€¢â€¢â€¢â€¢" />
            <button type="submit">Mettre Ã  jour</button>
          </form>
        </article>
      </div>
    </section>

    <section id="bilan-space" class="panel" data-lock="bilan">
      <header class="panel-header">
        <div>
          <p class="eyebrow">Espace bilan</p>
          <h2>Support de dialogue</h2>
        </div>
        <div>
          <button class="ghost-btn" data-action="lock-bilan">Verrouiller</button>
        </div>
      </header>

      <div class="lock-banner" id="bilanLockBanner">
        <p>AccÃ¨s protÃ©gÃ© : code PIN requis.</p>
        <form id="bilanUnlockForm" class="pin-form">
          <label for="bilanPinInput">Code PIN</label>
          <input id="bilanPinInput" type="password" inputmode="numeric" maxlength="6" required />
          <button type="submit">DÃ©verrouiller</button>
        </form>
      </div>

      <div class="grid lockable" id="bilanContent">
        <article class="card">
          <h3>Bilan enfant</h3>
          <form id="childReviewForm" class="stack-form">
            <label for="childHelps">Ce qui mâ€™aide le plus</label>
            <textarea id="childHelps" rows="3"></textarea>
            <label for="childProud">Ce dont je suis fier</label>
            <textarea id="childProud" rows="3"></textarea>
            <label for="childTry">Ce que je veux essayer</label>
            <textarea id="childTry" rows="3"></textarea>
            <button type="submit">Enregistrer</button>
          </form>
        </article>

        <article class="card">
          <h3>Bilan parent</h3>
          <form id="parentReviewForm" class="stack-form">
            <label for="parentRisks">Moments Ã  risque</label>
            <textarea id="parentRisks" rows="3"></textarea>
            <label for="parentStrategies">StratÃ©gies efficaces</label>
            <textarea id="parentStrategies" rows="3"></textarea>
            <label for="parentStructure">Ajustements prÃ©vus</label>
            <textarea id="parentStructure" rows="3"></textarea>
            <button type="submit">Enregistrer</button>
          </form>
        </article>

        <article class="card">
          <h3>Historique des Ã©motions</h3>
          <ul id="emotionHistory" class="history-list"></ul>
        </article>

        <article class="card span-2">
          <h3>Export / Import</h3>
          <div class="export-actions">
            <button id="exportJsonBtn" type="button">Exporter en JSON</button>
            <button id="exportCsvBtn" type="button">Exporter en CSV</button>
            <label class="import-label" for="importFile">Importer des donnÃ©es</label>
            <input id="importFile" type="file" accept="application/json" />
          </div>
          <p class="micro-copy">Les donnÃ©es restent dans le navigateur. Exportez pour partager avec un pro ou sauvegarder.</p>
        </article>
      </div>
    </section>
  </main>

  <footer class="app-footer">
    <p>PILOTE â€“ outil bienveillant de co-rÃ©gulation parentâ€“enfant.</p>
  </footer>

  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <script src="app.js" defer></script>
</body>
</html>
